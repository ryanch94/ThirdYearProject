<!DOCTYPE html>
<html>
<head>
    <title></title>
	<meta charset="utf-8" />
    <!-- Bootstrap Core CSS -->
    <link href="../Content/bootstrap.min.css" rel="stylesheet" />
    <!-- Custom CSS -->
    <link href="../css/business-frontpage.css" rel="stylesheet" />

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
</head>
<body>
    <!--#region Weekday Tabs-->
    <div class="row">
        <ul class="nav nav-tabs navTimetable">
            <li class="col-xs-2" role="presentation"><a data-toggle="tab" href="#Monday"><h2>M</h2></a></li>
            <li class="col-xs-2" role="presentation"><a data-toggle="tab" href="#Tuesday"><h2>T</h2></a></li>
            <li class="col-xs-2" role="presentation"><a data-toggle="tab" href="#Wednesday"><h2>W</h2></a></li>
            <li class="col-xs-2" role="presentation"><a data-toggle="tab" href="#Thursday"><h2>T</h2></a></li>
            <li class="col-xs-2" role="presentation"><a data-toggle="tab" href="#Friday"><h2>F</h2></a></li>
        </ul>
    </div>
    <!--#endregion Navigation Tabs-->

    <div class="tab-content" ng-app="myApp" ng-controller="customersCtrl">
        <!--#region Day-->
        <div id="Monday" class="active tab-pane">
            <div class="container">
                <table class="table table-condensed">
                    <thead>
                        <tr>
                            <th>Time</th>
                            <th>Class</th>
                            <th>Room</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr></tr>
                        <tr></tr>
                        <tr></tr>
                        <tr></tr>
                        <tr></tr>
                        <tr></tr>
                        <tr></tr>
                        <tr></tr>
                        <tr></tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div id="Tuesday" class="tab-pane">
Tue
        </div>
        <div id="Wednesday" class="tab-pane">
Wed
        </div>
        <div id="Thursday" class="tab-pane">
Thurs
        </div>
        <div id="Friday" class="tab-pane">
Fri
        </div>
    </div>
    <!-- jQuery -->
    <script src="../Scripts/jquery-1.9.1.js"></script>
    <!-- Bootstrap Core JavaScript -->
    <script src="../Scripts/bootstrap.min.js"></script>
    <script>
        //grabs the JSON file from WebAPI and puts it in scope.names
var app = angular.module('myApp', []);
app.controller('customersCtrl', function($scope, $http) {
    $http.get("http://signmeinwebapi.azurewebsites.net/api/timetables/8?dayOfWeek=3")
    .then(function (response) {
        $scope.names = response.data;
        //function to take a class and enter it in its particular row.
        function fillDays(element, index, array) {
            var time = $scope.names[index].DayBlock;
            var length = 2;
            //if only an hour long class
            if (length == 1) {
                $("tr:nth(" + time + ")").html("<td>" + (time+8) + "</td><td>" + element.Name + "</td><td>" + element.Code + "</td>");
            }
            //if class 2 hours
            else if (length == 2) {
                $("tr:nth(" + time + ")").html("<td>" + (time + 8) + "</td><td>" + element.Name + "</td><td>" + element.Code + "</td>");       
                $("tr:nth(" + (time+1) + ")").html("<td>" + (time + 9) + "</td><td>" + element.Name + "</td><td>" + element.Code + "</td>");
            }
            //if class 3 hours
            else if (length == 3) {
                $("tr:nth(" + time + ")").html("<td>" + (time + 8) + "</td><td>" + element.Name + "</td><td>" + element.Code + "</td>");
                $("tr:nth(" + (time + 1) + ")").html("<td>" + (time + 9) + "</td><td>" + element.Name + "</td><td>" + element.Code + "</td>");
                $("tr:nth(" + (time + 2) + ")").html("<td>" + (time + 10) + "</td><td>" + element.Name + "</td><td>" + element.Code + "</td>");
            }            
            
        }
        ($scope.names).forEach(fillDays);    
    $("tr:nth(" + time + ")").css("background-color", "yellow");


    });
    
});


    </script>
    <script>
        $(document).ready(function() {
            //var data = {};
            var data=[
           
                {"Name":"Maths", "Room":"b1041", "Length":"1","Starts":"9"}, 
                {"Name":"RAD", "Room":"B1042", "Length":"2","Starts":"10"}, 
                {"Name":"Web Prog","Room":"C1003", "Length":"1","Starts":"12"},
                {"Name":"Maths","Room":"b1041", "Length":"1","Starts":"2"}, 
                {"Name":"RAD", "Room":"B1042", "Length":"1","Starts":"3"}, 
                {"Name":"Web Prog","Room":"C1003", "Length":"2","Starts":"4"},
     
            ];
            //var id = 8;
            //var str1 = '"';
            //var str2 = "http://signmeinwebapi.azurewebsites.net/api/timetables/";
            //var str3 = String(id);
            //var str4 = "?dayOfWeek=2";
            //var str5 = '"';
            //var res = str1.concat(str2,str3,str4,str5);
            //alert(res);
            //$.getJSON(res).done(function (data2) {
            //    data = data2;
            });
      
    </script>
</body>
</html>
